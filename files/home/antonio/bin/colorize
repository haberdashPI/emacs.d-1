#!/bin/sh

shebang=$(head -1 "$1" | grep "#!" | rev | cut -d / -f1 | rev)
extension=$(basename "$1" | rev | cut -d . -f1 | rev)

if [ "$shebang" != "" ]; then
  pygmentize -l $shebang "$1"
elif [ "$extension" != "" -a "$extension" != $(basename "$1") ]; then
  pygmentize -l $extension "$1"
else
  cat "$1"
fi
